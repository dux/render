<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <title>Stash bucket</title>
  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.0.4/css/bootstrap-combined.min.css" media="screen" rel="stylesheet" type="text/css" />
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js" type="text/javascript"></script>
  <script src="http://rawgithub.com/dux/render/master/render.js" type="text/javascript"></script>
  <script src="./example.js" type="text/javascript"></script>
</head>
<body>
<div class='container'>
<div id='content'>
<style>
.box { box-shadow:1px 1px 5px rgba(0, 0, 0, 0.35); border-radius:3px; padding:10px; background:#fafafa;}
.box input { margin:0px; }
.navbar { display:none; }
body { background:#fff; margin-top:10px; }
xmp { background:#eee; padding:5px; }
</style>
<div class='row'>
<div class='span12'>
<a href='https://github.com/dux/render' target='_new'><img alt="Github-download-button" src="http://lime.outlawgametools.com/wp-content/uploads/2012/06/gitHub-download-button.png" style="float:right; width:150px; height:46px;" /></a>
<h1>Render.js examples</h1>
</div>
<div class='span8'>
<xmp template='basic'>
template: """
  <H3>URL bind</H3>
  <input bind='link' /><button class='btn'>Submit</button>
  <div if='link'>URL here</div><div if='! link'>NO URL</div></div>"""
</xmp>
<xmp template='basic2'>
template: """
  <H3>URL bind</H3>
  <input bind='link' /><button class='btn' bind="btn">Submit</button>"""
onchange: ->
  return @node.btn.disable 'Link is req' unless @data.link
  return @node.btn.disable 'At least 5 chrs' if @data.link.length < 5
  @node.btn.enable 'Submit'
</xmp>
<xmp template='timer'>
template: """
  <H3>Timer in ms</H3>
  <div><button bind="start">Start</button><button bind="stop">Stop</button></div>
  <div bind="time"></div>
  """
start_timer: ->
  @_timer = setInterval =>
    @node.time.html (new Date()).getTime()
    @node.start.disable()
    @node.stop.enable()
  , 100
once: ->
  @start_timer()
bind:
  start:->
    @start_timer()
  stop: (node)->
    clearInterval @_timer
    @node.start.enable()
    @node.stop.disable()
</xmp>
<xmp template='todo'>
template: """
  <h3>To to (<span bind="count"></span>)</h3>
  <form bind="add_todo">
  <input bind="todo" />
  </form>
  <ul bind="out"></ul>
  """
data:
  list:['buy milk']
bind:
  add_todo: ->
    return unless @data.todo
    @data.list.push @data.todo
    @data.todo = ''
onchange: ->
  ret = []
  for el in @data.list
    ret.push "<li>#{el}</li>"
  @data.out = ret.join("\n")
  @data.count = @data.list.length


</xmp>
<xmp template='markdown'>
script: 'https://raw.github.com/evilstreak/markdown-js/master/lib/markdown.js'
template: """
  <h3>Markdown data</h3>
  <textarea bind="md_data" style="width:96%; height:100px;"></textarea>
  <h4>Preview</h4>
  <div bind="md_prev" style="background:#eee;padding:5px;"></div>
  """
onchange: ->
  @node.md_prev.html = markdown.toHTML(@data.md_data)
</xmp>
</div>
<div class='span4'>
<h3>Call in any way</h3>
<xmp>
$(node).render(opts, data)
Render.to(node, opts, data)
</xmp>
<h3>Options</h3>
<xmp>
$(node).render(opts, data)
---
node: '#node' || [DOM object] || [jQuery object]
opts:
  template
    #data           : takes .html()
    /ajax.html      : $.get and render
    f(data) {}      : execute() and render
    <div>blah</div> : raw data
  script: [scripts to preload]     
  bind:
    el_on_state_change:(node, value) ->
      function data        
  data: { el1:1, el2:2, ... }
</xmp>
<h3>Methods</h3>
<xmp>
# Render in element
Render.to(node, opts, data)

# Replad render part
Render.refresh(any_dom_or_jQuery_node_inside_part)
</xmp>
<h3>You can use inline templates</h3>
<xmp>
<div id="inline">
  <H3>URL bind</H3>
  <form bind="hclick">
    <input bind='link' />
    <button class='btn'>Submit</button>
  </form>
</div>
&lt;script>
  $('#inline').render()
</script>
</xmp>
</div>
</div>

</div>
<div id='footer'>
<a class='fr' href='#'>Top of the page</a>
<p>
<a href="/" target="_new" style="color:#aaa;">stash.trifolium.hr</a><sup>&copy;</sup>
</p>
</div>
</div>
</body>
</html>
